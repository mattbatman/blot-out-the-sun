function refreshPage(){window.location.reload()}function Circle(a,b,c,d,e,f,g){this.distanceTraveled=a,this.startTime=b,this.endPosition=c,this.duration=d,this.animationRunning=e,this.forGame=f,this.score=g,this.reset=function(){this.distanceTraveled="0%",this.startTime=null,this.endPosition=92,this.duration=.666*this.duration,this.animationRunning=!0,this.forGame=!0,cssCircle.style.visibility="initial",cssCircle.style.left=a},this.lost=function(){htmlHeader.textContent=textToDisplay.resultText[1],htmlParagraph.textContent="You blotted the sun "+this.score+" times before failing your fellow creatures of the dark. You meditate on their screams as you all slowly burn to death.",window.innerWidth<400?htmlEarth.style.height="0%":htmlEarth.style.height="13%",htmlButton.style.visibility="initial",htmlButton.setAttribute("class","day-button"),htmlButton.textContent=textToDisplay.confirmButtonText[4],htmlButton.addEventListener("click",refreshPage,!1)},this.renderAnimationLinear=function(a){void 0===a&&(a=(new Date).getTime()),null===this.startTime&&(this.startTime=a),this.distanceTraveled=(a-this.startTime)/this.duration*this.endPosition,this.distanceTraveled>this.endPosition&&(cssCircle.style.visibility="hidden",this.animationRunning=!1),cssCircle.style.left=this.distanceTraveled+"%"},this.renderAnimationCircular=function(a){void 0===a&&(a=(new Date).getTime()),null===this.startTime&&(this.startTime=a),progress=(a-this.startTime)/this.duration/1e3,x=Math.sin(2*progress*Math.PI-2*Math.PI/4),y=Math.cos(2*progress*Math.PI-2*Math.PI/4),cssCircle.style.left=centerX+radiusX*x+"px",cssCircle.style.bottom=centerY+radiusY*y+"px",progress>=.5&&(this.animationRunning=!1,cssCircle.style.visibility="hidden",f&&this.lost())}}function animateSun(){cssCircle.addEventListener("click",sunCircleClicked,!1),sun.renderAnimationCircular(),sun.animationRunning&&requestAnimationFrame(animateSun,cssCircle)}function sunCircleClicked(){sun.score++,sun.animationRunning=!1,htmlEarth.removeAttribute("class"),htmlHeader.textContent=textToDisplay.resultText[0],htmlParagraph.textContent="Such skill! You've restored the night "+sun.score+" times. But beware - the sun always rises. It's peaking now. It seems stronger somehow...",cssCircle.style.visibility="hidden",htmlButton.style.visibility="initial",htmlBody.setAttribute("class","night-body-settings"),htmlButton.textContent=textToDisplay.confirmButtonText[3],htmlButton.addEventListener("click",startCountdown,!1)}function startCountdown(){countdownCallTracker=0,htmlButton.style.visibility="hidden",htmlBody.setAttribute("class","day-body-settings"),htmlParagraph.textContent=textToDisplay.paragraphText[textToDisplay.paragraphText.length-1],countdown(),countdownIntervalCycle=setInterval(countdown,countdownInterval)}function countdown(){switch(countdownCallTracker){case 0:htmlEarth.setAttribute("class","ground"),htmlHeader.textContent=textToDisplay.countdownText[countdownCallTracker];break;case 1:htmlHeader.textContent=textToDisplay.countdownText[countdownCallTracker];break;case 2:htmlHeader.textContent=textToDisplay.countdownText[countdownCallTracker];break;case 3:htmlHeader.textContent=textToDisplay.countdownText[countdownCallTracker];break;default:htmlHeader.textContent="",sun.reset(),clearInterval(countdownIntervalCycle),animateSun()}countdownCallTracker++}function determineSpecies(){selectedSpecies=document.getElementById("radio-choice-1").checked===!0?0:document.getElementById("radio-choice-2").checked===!0?1:document.getElementById("radio-choice-3").checked===!0?2:3}function speciesStory(){switch(selectedSpecies){case 0:htmlParagraph.textContent=textToDisplay.paragraphText[1];break;case 1:htmlParagraph.textContent=textToDisplay.paragraphText[2];break;case 2:htmlParagraph.textContent=textToDisplay.paragraphText[3];break;default:htmlParagraph.textContent="Something's wrong. It says you're a pikachu?"}}function pageAdvancement(){0===confirmButtonClickCounter?(cssCircle.style.visibility="hidden",moon.animationRunning=!1,htmlHeader.textContent=textToDisplay.headerText[1],htmlParagraph.innerHTML=radioFormMarkup,htmlButton.textContent=textToDisplay.confirmButtonText[1],confirmButtonClickCounter++):1===confirmButtonClickCounter?(cssCircle.style.visibility="hidden",cssCircle.removeAttribute("class"),cssCircle.setAttribute("class","sun"),determineSpecies(),3>selectedSpecies&&(htmlHeader.textContent=textToDisplay.headerText[2],speciesStory(),htmlButton.textContent=textToDisplay.confirmButtonText[2],confirmButtonClickCounter++)):2===confirmButtonClickCounter&&(cssCircle.style.visibility="hidden",startCountdown(),confirmButtonClickCounter++)}!function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b,c){var d=(new Date).getTime(),e=Math.max(0,16-(d-a)),f=window.setTimeout(function(){b(d+e)},e);return a=d+e,f}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}();var htmlBody=document.getElementById("body-id"),htmlGameBorder=document.getElementById("main-game-box"),htmlHeader=document.getElementById("main-header-text"),htmlParagraph=document.getElementById("main-paragraph-text"),htmlButton=document.getElementById("user-confirm-button"),cssCircle=document.getElementById("floating-circle-div"),htmlEarth=document.getElementById("earth"),moon=new Circle("0%",null,92,175,!0,!1,0),sun=new Circle("0%",null,92,99,!1,!0,0),textToDisplay={headerText:["Blot Out the Sun","You Are A...","Behold!"],paragraphText:["Prepare for the sun to rise!","You have chosen to be a race notorious for romantically engaging high school companions despite having a mental age that is centuries old. Your undead life is comfortable (albeit dramatic). However, the sun is about to rise and burn you alive. Strike it down to continue preying on young humans.","You are the beastly werewolf. You are a member of the choir of your werewolf church, and practice has gone too long. The sun is about to rise. Protect your pack. Strike down the sun.","You are an archer in Xerxes the Great's Persian army. Some pesky Spartans are resisting your advances. Prepare your arrow and blot out the sun.","Your score: ","Such skill! You've restored the night times. But beware -- the sun always rises.",""],confirmButtonText:["ENTER","APPLY SUNSCREEN","START","CONTINUE","PLAY AGAIN"],countdownText:["3","2","1","Go!"],resultText:["Darkness Shall Reign","Game Over"]},radioFormMarkup='<fieldset id="radioRaceSelection"><input type="radio" name="radio-choice" id="radio-choice-1" tabindex="1" value="Vampire"><label for="radio-choice-1">Vampire</label><br><input type="radio" name="radio-choice" id="radio-choice-2" tabindex="2" value="Werewolf"><label for="radio-choice-2">Werewolf</label><br><input type="radio" name="radio-choice" id="radio-choice-3" tabindex="3" value="Persian Archer"><label for="radio-choice-3">Persian Archer</label></fieldset>',selectedSpecies=0,confirmButtonClickCounter=0,score=0,centerX=window.innerWidth/2,centerY=.333*window.innerHeight,radiusX=htmlGameBorder.clientWidth/2-cssCircle.offsetWidth/2,radiusY=window.innerHeight/3,progress,x,y,countdownInterval=1e3,countdownCallTracker=0,countdownIntervalCycle;document.addEventListener("DOMContentLoaded",function(){!function a(){moon.renderAnimationCircular(),moon.animationRunning&&requestAnimationFrame(a,cssCircle)}()},!1),htmlButton.addEventListener("click",pageAdvancement,!1);