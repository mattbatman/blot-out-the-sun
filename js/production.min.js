function adjustCenterOfPath(){centerX=window.innerWidth/2,centerY=.25*window.innerHeight,radiusX=window.innerWidth/3,radiusY=window.innerHeight/2}function Circle(a,b,c,d,e,f,g){this.distanceTraveled=a,this.startTime=b,this.endPosition=c,this.duration=d,this.animationRunning=e,this.forGame=f,this.score=g,this.reset=function(){this.distanceTraveled="0%",this.startTime=null,this.endPosition=92,this.duration=.555*this.duration,this.animationRunning=!0,this.forGame=!0,cssCircle.style.visibility="initial",cssCircle.style.left=a},this.hardReset=function(){this.distanceTraveled="0%",this.startTime=null,this.endPosition=92,this.duration=99,this.animationRunning=!1,this.forGame=!0,this.score=0,cssCircle.style.visibility="initial",cssCircle.style.left=a},this.resetMoon=function(){this.distanceTraveled="0%",this.startTime=null,this.endPosition=92,this.duration=175,this.animationRunning=!0,this.forGame=!1,cssCircle.style.visibility="initial",cssCircle.style.left=a},this.lost=function(){gamePage.style.display="none",lostPage.style.display="block",window.innerHeight<550&&(htmlEarth.removeAttribute("class"),htmlEarth.setAttribute("class","lower-ground")),htmlParagraphLost.textContent="You blotted the sun "+this.score+" times before failing your fellow creatures of the dark. You meditate on their screams as you all slowly burn to death."},this.renderAnimationCircular=function(a){void 0===a&&(a=(new Date).getTime()),null===this.startTime&&(this.startTime=a),progress=(a-this.startTime)/this.duration/1e3,x=Math.sin(2*progress*Math.PI-2*Math.PI/4),y=Math.cos(2*progress*Math.PI-2*Math.PI/4),cssCircle.style.left=centerX+radiusX*x+"px",cssCircle.style.bottom=centerY+radiusY*y+"px",progress>=.5&&(this.animationRunning=!1,cssCircle.style.visibility="hidden",f&&this.lost())}}function animateSun(){cssCircle.addEventListener("click",sunCircleClicked,!1),sun.renderAnimationCircular(),sun.animationRunning&&requestAnimationFrame(animateSun,cssCircle)}function animateMoon(){moon.renderAnimationCircular(),moon.animationRunning&&requestAnimationFrame(animateMoon,cssCircle)}function sunCircleClicked(){sun.score++,sun.animationRunning=!1,gamePage.style.display="none",winPage.style.display="block",htmlEarth.style.display="none",htmlParagraphWin.textContent="Such skill! You've restored the night "+sun.score+" times - but beware, for the sun always rises. It's peaking now. It seems stronger somehow...",cssCircle.style.visibility="hidden",htmlBody.setAttribute("class","night-body-settings")}function startCountdown(){thirdPage.style.display="none",winPage.style.display="none",gamePage.style.display="block",countdownCallTracker=0,htmlBody.setAttribute("class","day-body-settings"),countdown(),countdownIntervalCycle=setInterval(countdown,countdownInterval)}function countdown(){switch(countdownCallTracker){case 0:htmlEarth.style.display="block",htmlGameHeader.textContent=textToDisplay.countdownText[countdownCallTracker];break;case 1:htmlGameHeader.textContent=textToDisplay.countdownText[countdownCallTracker];break;case 2:htmlGameHeader.textContent=textToDisplay.countdownText[countdownCallTracker];break;case 3:htmlGameHeader.textContent=textToDisplay.countdownText[countdownCallTracker];break;default:htmlGameHeader.textContent="",sun.reset(),clearInterval(countdownIntervalCycle),animateSun()}countdownCallTracker++}function determineSpecies(){selectedSpecies=document.getElementById("radio-choice-1").checked===!0?0:document.getElementById("radio-choice-2").checked===!0?1:document.getElementById("radio-choice-3").checked===!0?2:3}function speciesStory(){switch(selectedSpecies){case 0:speciesParagraph.textContent=textToDisplay.speciesText[selectedSpecies];break;case 1:speciesParagraph.textContent=textToDisplay.speciesText[selectedSpecies];break;case 2:speciesParagraph.textContent=textToDisplay.speciesText[selectedSpecies];break;default:speciesParagraph.textContent="Something's wrong. It says you're a pikachu?"}}function pageAdvancementOne(){cssCircle.style.visibility="hidden",moon.animationRunning=!1,landingPage.style.display="none",secondPage.style.display="block"}function pageAdvancementTwo(){cssCircle.style.visibility="hidden",cssCircle.removeAttribute("class"),cssCircle.setAttribute("class","sun"),determineSpecies(),3>selectedSpecies&&(speciesStory(),secondPage.style.display="none",thirdPage.style.display="block")}function pageAdvancementThree(){cssCircle.style.visibility="hidden",startCountdown()}function resetGame(){sun.hardReset(),cssCircle.removeEventListener("click",sunCircleClicked,!1),lostPage.style.display="none",landingPage.style.display="block",htmlBody.setAttribute("class","night-body-settings"),htmlEarth.style.display="none",htmlEarth.removeAttribute("class"),htmlEarth.setAttribute("class","high-ground"),cssCircle.removeAttribute("class"),cssCircle.setAttribute("class","moon"),cssCircle.style.visibility="hidden",window.innerWidth>550&&(moon.resetMoon(),animateMoon())}!function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b,c){var d=(new Date).getTime(),e=Math.max(0,16-(d-a)),f=window.setTimeout(function(){b(d+e)},e);return a=d+e,f}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}();var landingPage=document.getElementById("landing-page-screen"),secondPage=document.getElementById("second-title-screen"),thirdPage=document.getElementById("third-title-screen"),gamePage=document.getElementById("game-screen"),lostPage=document.getElementById("lost-screen"),winPage=document.getElementById("win-screen"),htmlButtonOne=document.getElementById("user-confirm-button-one"),htmlButtonTwo=document.getElementById("user-confirm-button-two"),htmlButtonThree=document.getElementById("user-confirm-button-three"),htmlButtonLost=document.getElementById("user-confirm-button-reset"),htmlButtonWin=document.getElementById("user-confirm-button-win"),speciesParagraph=document.getElementById("species-story-text"),htmlGameHeader=document.getElementById("game-header-text"),htmlBody=document.getElementById("body-id"),htmlGameBorder=document.getElementById("main-game-box"),moonPathBorder=document.getElementById("intro-moon-box"),htmlParagraphLost=document.getElementById("paragraph-lost-text"),htmlParagraphWin=document.getElementById("paragraph-win-text"),cssCircle=document.getElementById("floating-circle-div"),htmlEarth=document.getElementById("earth");secondPage.style.display="none",thirdPage.style.display="none",gamePage.style.display="none",lostPage.style.display="none",winPage.style.display="none",htmlEarth.style.display="none";var moon=new Circle("0%",null,92,175,!0,!1,0),sun=new Circle("0%",null,92,99,!1,!0,0),textToDisplay={speciesText:["You have chosen to be a race notorious for romantically engaging high school companions despite having a mental age that is centuries old. Your undead life is comfortable (albeit dramatic). However, the sun is about to rise and burn you alive. Strike it down to continue preying on young humans.","You are the beastly werewolf. You are a member of the choir of your werewolf church, and practice has gone too long. The sun is about to rise. Protect your pack. Strike down the sun.","You are an archer in Xerxes the Great's Persian army. Some pesky Spartans are resisting your advances. Prepare your arrow and blot out the sun."],countdownText:["3","2","1","Go!"],resultText:["Darkness Shall Reign","Game Over"]},selectedSpecies=0,confirmButtonClickCounter=0,score=0,centerX=window.innerWidth/2,centerY=.25*window.innerHeight,radiusX=window.innerWidth/3,radiusY=window.innerHeight/2,progress,x,y,countdownInterval=1e3,countdownCallTracker=0,countdownIntervalCycle;cssCircle.style.visibility="hidden",window.innerWidth>550&&(cssCircle.style.visibility="initial",window.addEventListener("load",function(){!function a(){moon.renderAnimationCircular(),moon.animationRunning&&requestAnimationFrame(a,cssCircle)}()},!1)),htmlButtonOne.addEventListener("click",pageAdvancementOne,!1),htmlButtonTwo.addEventListener("click",pageAdvancementTwo,!1),htmlButtonThree.addEventListener("click",pageAdvancementThree,!1),htmlButtonWin.addEventListener("click",startCountdown,!1),htmlButtonLost.addEventListener("click",resetGame,!1),window.onresize=adjustCenterOfPath;